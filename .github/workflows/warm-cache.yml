name: Warm Cricket Cache
# DISABLED: api-sync.vercel.app is dead (402). API is internal-only on Oracle VPS.
# Cache is warmed by live-score-worker (60s) and user traffic. No external warming needed.

on:
  # schedule:
  #   - cron: '*/30 * * * *'
  #   - cron: '0 */2 * * *'
  workflow_dispatch:

jobs:
  warm-cache:
    runs-on: ubuntu-latest
    
    steps:
      - name: Warm Recent Scores Cache
        run: |
          echo "üî• Warming recent-scores cache..."
          response=$(curl -s -o /dev/null -w "%{http_code}" https://api-sync.vercel.app/api/cricket/recent-scores)
          if [ $response -eq 200 ]; then
            echo "‚úÖ Recent scores cache warmed successfully"
          else
            echo "‚ö†Ô∏è Warning: Recent scores returned status $response"
          fi
      
      - name: Warm Live Scores Cache
        run: |
          echo "üî• Warming live-scores cache..."
          response=$(curl -s -o /dev/null -w "%{http_code}" https://api-sync.vercel.app/api/cricket/live-scores)
          if [ $response -eq 200 ]; then
            echo "‚úÖ Live scores cache warmed successfully"
          else
            echo "‚ö†Ô∏è Warning: Live scores returned status $response"
          fi
      
      - name: Warm Upcoming Matches Cache
        run: |
          echo "üî• Warming upcoming-matches cache..."
          response=$(curl -s -o /dev/null -w "%{http_code}" https://api-sync.vercel.app/api/cricket/upcoming-matches)
          if [ $response -eq 200 ]; then
            echo "‚úÖ Upcoming matches cache warmed successfully"
          else
            echo "‚ö†Ô∏è Warning: Upcoming matches returned status $response"
          fi
      
      - name: Summary
        run: |
          echo "üéâ Cache warming completed!"
          echo "Users will now get instant responses from Redis cache"
